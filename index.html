<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的网站</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <header>
        <nav>
            <ul>
                <li><a href="#">首页</a></li>
                <li><a href="#">分类</a></li>
                <li><a href="#">关于我们</a></li>
                <li><a href="#">联系</a></li>
            </ul>
        </nav>
        <div class="search-container">
            <input type="text" placeholder="搜索..." />
            <button type="submit">搜索</button>
        </div>
    </header>

    <div class="announcement-container" id="announcement-container">
        <div class="announcement" id="announcement">
            <p>公告1：欢迎访问我们的网站！</p>
            <p>公告2：新品上线，敬请期待！</p>
            <p>公告3：感谢您的支持与信任！</p>
        </div>
    </div>

    <main>
        <div class="card-container" id="image-gallery">
            <!-- 动态生成的卡片将放在这里 -->
        </div>
        <div class="pagination" id="pagination">
            <button id="prev">上一页</button>
            <button id="next">下一页</button>
        </div>

    </main>


    <footer>
        <div class="footer-music">
            <button id="prev-song">上一首</button>
            <button id="play-pause">播放</button>
            <button id="next-song">下一首</button>
        </div>
        <p>公司名称 | <br>
            <a href="#">用户协议</a> | <a href="#">隐私政策</a>
        </p>
    </footer>

    <script>
        const imageFolderPath = 'image/封面/';
        let totalImages = 50; // 总图片数
        const imagesPerPage = 20; // 每页显示20张图片
        let currentPage = 1;

        // 获取图片画廊的容器
        const imageGallery = document.getElementById('image-gallery');

        // 获取分页按钮
        const prevButton = document.getElementById('prev');
        const nextButton = document.getElementById('next');
        console.log(`当前页: ${currentPage}, 总图片数: ${totalImages}`);

        // 获取搜索框和按钮
        const searchInput = document.querySelector('.search-container input');
        const searchButton = document.querySelector('.search-container button');


        // 初始化每张图片的链接
        const links = [
            'xiangqingye/夏季透气男鞋子2023新款小白鞋潮流百搭跑步男士休闲运动老爹潮鞋.html',
            'xiangqingye/2.html',
            'xiangqingye/3.html',
            'xiangqingye/4.html',
            'xiangqingye/5.html',
            'xiangqingye/6.html',
            'xiangqingye/新版详情页模板.html',
            'xiangqingye/8.html',
            'xiangqingye/9.html',
            'xiangqingye/10.html',
            'xiangqingye/11.html',
            'xiangqingye/12.html',
            'xiangqingye/13.html',
            'xiangqingye/14.html',
            'xiangqingye/15.html',
            'xiangqingye/16.html',
            'xiangqingye/17.html',
            'xiangqingye/18.html',
            'xiangqingye/19.html',
            'xiangqingye/20.html',
            'xiangqingye/夏季透气男鞋子2023新款小白鞋潮流百搭跑步男士休闲运动老爹潮鞋.html',
            'xiangqingye/2.html',
            'xiangqingye/3.html',
            'xiangqingye/4.html',
            'xiangqingye/5.html',
            'xiangqingye/6.html',
            'xiangqingye/7.html',
            'xiangqingye/8.html',
            'xiangqingye/9.html',
            'xiangqingye/10.html',
            'xiangqingye/11.html',
            'xiangqingye/12.html',
            'xiangqingye/13.html',
            'xiangqingye/14.html',
            'xiangqingye/15.html',
            'xiangqingye/16.html',
            'xiangqingye/17.html',
            'xiangqingye/18.html',
            'xiangqingye/19.html',
            'xiangqingye/20.html',
            // 继续添加链接...
        ];

        // 假设这是每张图片对应的价格数组
        const prices = [
            '¥199 销量：10000', '¥299 销量：20000', '¥399 销量：30000', '¥249 销量：15000', '¥159 销量：5000',
            '¥199 销量：10000', '¥299 销量：20000', '¥399 销量：30000', '¥249 销量：15000', '¥159 销量：5000',
            '¥199 销量：10000', '¥299 销量：20000', '¥399 销量：30000', '¥249 销量：15000', '¥159 销量：5000',
            '¥199 销量：10000', '¥299 销量：20000', '¥399 销量：30000', '¥249 销量：15000', '¥159 销量：5000',
            '¥199 销量：10000', '¥299 销量：20000', '¥399 销量：30000', '¥249 销量：15000', '¥159 销量：5000',
            '¥199 销量：10000', '¥299 销量：20000', '¥399 销量：30000', '¥249 销量：15000', '¥159 销量：5000',
            '¥199 销量：10000', '¥299 销量：20000', '¥399 销量：30000', '¥249 销量：15000', '¥159 销量：5000',
            '¥199 销量：10000', '¥299 销量：20000', '¥399 销量：30000', '¥249 销量：15000', '¥159 销量：5000',
            '¥199 销量：10000', '¥299 销量：20000', '¥399 销量：30000', '¥249 销量：15000', '¥159 销量：5000',
            '¥199 销量：10000', '¥299 销量：20000', '¥399 销量：30000', '¥249 销量：15000', '¥159 销量：5000',
            '¥199 销量：10000', '¥299 销量：20000', '¥399 销量：30000', '¥249 销量：15000', '¥159 销量：5000',
            // 确保价格数组与链接数组一致
        ];



        function loadImages() {
            imageGallery.innerHTML = '';

            const startIndex = (currentPage - 1) * imagesPerPage;
            const endIndex = Math.min(startIndex + imagesPerPage, totalImages);

            for (let i = startIndex; i < endIndex; i++) {
                const card = document.createElement('div');
                card.classList.add('card');

                const img = document.createElement('img');
                img.src = `${imageFolderPath}${i + 1}.jpg`; // 假设图片命名为 image1.jpg, image2.jpg, ...

                const title = links[i].replace('xiangqingye/', '').replace('.html', '');
                const titleElement = document.createElement('h3');
                titleElement.textContent = title;

                const priceElement = document.createElement('p');
                priceElement.textContent = prices[i]; // 获取对应的价格

                card.addEventListener('click', () => {
                    window.location.href = links[i];
                });

                card.appendChild(img);
                card.appendChild(titleElement);
                card.appendChild(priceElement);
                imageGallery.appendChild(card);
            }
        }


        function updateButtons() {
            prevButton.disabled = currentPage === 1;
            nextButton.disabled = currentPage * imagesPerPage >= totalImages;
        }

        prevButton.addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                loadImages();
                updateButtons();
            }
        });

        nextButton.addEventListener('click', () => {
            if (currentPage * imagesPerPage < totalImages) {
                currentPage++;
                loadImages();
                updateButtons();
            }
        });
        // 搜索功能
        function filterImages() {
            const searchTerm = searchInput.value.toLowerCase(); // 获取搜索词并转为小写
            currentPage = 1; // 重置为第一页

            // 过滤出符合条件的卡片索引
            const filteredLinks = links.filter(link => link.toLowerCase().includes(searchTerm));
            const filteredPrices = prices.filter((_, index) => links[index].toLowerCase().includes(searchTerm));

            // 更新总图片数
            totalImages = filteredLinks.length;

            // 加载符合条件的图片
            loadFilteredImages(filteredLinks, filteredPrices);
            updateButtons();
        }

        function loadImages() {
            imageGallery.innerHTML = '';

            const startIndex = (currentPage - 1) * imagesPerPage;
            const endIndex = Math.min(startIndex + imagesPerPage, totalImages);

            for (let i = startIndex; i < endIndex; i++) {
                const card = document.createElement('div');
                card.classList.add('card');

                const img = document.createElement('img');
                img.src = `${imageFolderPath}${i + 1}.jpg`;

                const title = links[i].replace('xiangqingye/', '').replace('.html', '');
                const titleElement = document.createElement('h3');
                titleElement.textContent = title;

                const priceElement = document.createElement('p');
                priceElement.textContent = prices[i];

                card.addEventListener('click', () => {
                    window.open(links[i], '_blank'); // 新窗口打开链接
                });

                card.appendChild(img);
                card.appendChild(titleElement);
                card.appendChild(priceElement);
                imageGallery.appendChild(card);
            }
        }


        const announcementContainer = document.getElementById('announcement-container');
        const announcement = document.getElementById('announcement');

        // 动态生成公告内容并设置不同速度
        const announcements = [
            { text: "公告1：欢迎访问我们的网站！", speed: 20 },

            { text: "公告2：新品上线，敬请期待！", speed: 25 },
            { text: "公告3：感谢您的支持与信任！", speed: 30 }
        ];

        announcement.innerHTML = announcements.map(a => `<p>${a.text}</p>`).join('');

        let totalHeight = announcement.scrollHeight; // 获取总高度
        announcement.style.animationDuration = `${totalHeight / 9}s`; // 根据内容高度设置动画时长

        // 重新计算动画时长，确保速度适应
        function updateScrollSpeed() {
            const speedFactor = Math.random() * 10 + 5; // 随机生成速度因子
            announcement.style.animationDuration = `${totalHeight / speedFactor}s`;
        }

        // 设置每隔一段时间重新计算速度
        setInterval(updateScrollSpeed, 110000);


        // 绑定搜索框事件
        searchInput.addEventListener('input', filterImages);

        loadImages();
        updateButtons();

        // 音乐模块控制
        const songs = [
            'yinyue/015d_035e_010b_67de87e71b44c5fd0fd46af0bbf8e00e.mp3',
            'yinyue/obj_wo3DlMOGwrbDjj7DisKw_7896511646_017b_2f0d_9cb4_95644dbaf1d7c5037c1fe0ebb099ba7e.mp3',
            'yinyue/obj_wo3DlMOGwrbDjj7DisKw_13957606465_5f77_6fc2_30dc_f7b87880d01fe0c66b4f25878bbd5df5.mp3',

            'yinyue/obj_wo3DlMOGwrbDjj7DisKw_15101518007_63f1_f753_be5e_2b7cb66243c25536846e56e307c13813.mp3',
            'yinyue/obj_wo3DlMOGwrbDjj7DisKw_30001737540_ee26_692f_2edd_a1112d0b0c828e88e1157a7aa6f775ed.mp3',
            'yinyue/obj_wo3DlMOGwrbDjj7DisKw_33489452813_8fea_3f51_7f2c_2182b6057e431155bcfaa8ecf0ae80e9.mp3',

            'yinyue/obj_wo3DlMOGwrbDjj7DisKw_34967874931_00a8_3009_febb_2109ac9b67c244bcb34a11d74c19a44d.mp3',
            'yinyue/obj_wo3DlMOGwrbDjj7DisKw_35642704157_626f_197b_c7aa_5dc3558b5f97eb34a91828570b6d7d0e.mp3',
            'yinyue/obj_wo3DlMOGwrbDjj7DisKw_43994540329_0aa6_6844_d384_767e4781a620e00074d4d9a5da31da57.mp3',

            'yinyue/obj_wo3DlMOGwrbDjj7DisKw_45495346114_cf9a_e574_c46e_5463bb36c1b3b8d3196101d1f92a199c.mp3',
            'yinyue/obj_wo3DlMOGwrbDjj7DisKw_43994540329_0aa6_6844_d384_767e4781a620e00074d4d9a5da31da57.mp3',
        ];



        let currentSongIndex = 0;
        const audio = new Audio(songs[currentSongIndex]);
        const playPauseButton = document.getElementById('play-pause');

        // 音乐控制功能
        playPauseButton.addEventListener('click', () => {
            if (audio.paused) {
                audio.play();
                playPauseButton.textContent = '暂停';
            } else {
                audio.pause();
                playPauseButton.textContent = '播放';
            }
        });

        document.getElementById('prev-song').addEventListener('click', () => {
            currentSongIndex = (currentSongIndex - 1 + songs.length) % songs.length;
            audio.src = songs[currentSongIndex];
            audio.play();
            playPauseButton.textContent = '暂停';
        });

        document.getElementById('next-song').addEventListener('click', () => {
            currentSongIndex = (currentSongIndex + 1) % songs.length;
            audio.src = songs[currentSongIndex];
            audio.play();
            playPauseButton.textContent = '暂停';
        });
        playPauseButton.addEventListener('click', togglePlayPause);
        prevSongButton.addEventListener('click', playPrevSong);
        nextSongButton.addEventListener('click', playNextSong);

        // 初始化加载图片
        loadImages();
        updateButtons();
    </script>
</body>

</html>